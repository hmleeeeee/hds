<!DOCTYPE html>
<html lang="ko">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<meta http-equiv="X-UA-Compatible" content="ie=edge" />
		<meta name="format-detection" content="telephone=no" />
		<title>현재화면명 | 메뉴명 | 사이트명</title>
		<link rel="shortcut icon" href="../../assets/img/_common/favicon.png" />

		<!-- style -->
		<link rel="stylesheet" href="../../assets/plugins/jqGrid-4.7.0/css/ui.jqgrid.css" />
		<link rel="stylesheet" href="../../assets/plugins/ztree/zTreeStyle.css" />
		<link rel="stylesheet" href="../../assets/plugins/sweetalert/custom-swal.css" />
		<link rel="stylesheet" href="../../assets/css/style.css" />
		<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css" />

		<!-- JavaScript -->
		<script src="../../assets/js/_common/jquery-1.12.4.min.js"></script>
		<script src="../../assets/plugins/jquery-ui/jquery-ui.min.js"></script>

		<!-- jqGrid Plugins -->
		<script src="../../assets/plugins/jqGrid-4.7.0/js/i18n/grid.locale-kr.js"></script>
		<script src="../../assets/plugins/jqGrid-4.7.0/js/minified/jquery.jqGrid.min.js"></script>

		<!-- ztree Plugins -->
		<script src="../../assets/plugins/ztree/jquery.ztree.core.js"></script>
		<script src="../../assets/plugins/ztree/jquery.ztree.excheck.js"></script>
		<script src="../../assets/plugins/ztree/jquery.ztree.exedit.js"></script>
		<script src="../../assets/plugins/ztree/zTreeCustom.js"></script>

		<!-- Plugins -->
		<script src="../../assets/plugins/slick/slick.min.js"></script>
		<script src="../../assets/js/_common/datepicker.js"></script>
		<script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
		<script src="../../assets/js/component/ui-script.js"></script>
		<script src="../../assets/js/_common/ui-global.js"></script>
		<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

		<!-- TODO : 개발시 반드시 삭제, 레이아웃 세팅 JS -->
		<script src="../../assets/_guide/js/ui-layout-setting.js"></script>

		<!-- 페이지 개별 스크립트 -->
		<script>
			$(document).ready(function () {
				function adjustJqGridHeaderPadding() {
					// 페이지 내의 모든 jqGrid를 선택
					var $allGrids = $("[id^='jqGrid']");

					// 각 그리드에 대해 패딩 조정
					$allGrids.each(function () {
						var $grid = $(this);

						// 그리드가 보이는 상태인지 확인
						if ($grid.is(":visible")) {
							var $bdiv = $grid.closest(".ui-jqgrid").find(".ui-jqgrid-bdiv");
							var $hdiv = $grid.closest(".ui-jqgrid").find(".ui-jqgrid-hdiv");

							if ($bdiv.length === 0 || $hdiv.length === 0) return;

							var scrollbarWidth = $bdiv[0].offsetWidth - $bdiv[0].clientWidth;
							scrollbarWidth = Math.round(scrollbarWidth);

							if (scrollbarWidth > 3) {
								$hdiv[0].style.setProperty("padding-right", scrollbarWidth + -2 + "px", "important");
							} else {
								$hdiv.css("padding-right", "0px");
							}
						}
					});
				}

				// 탭 이벤트 모니터링을 위한 별도 코드

				adjustJqGridHeaderPadding();

				// 탭 클릭 이벤트 모니터링
				$(document).on("click", ".krds-tab-area.layer .tab > ul > li", function () {
					// 탭이 활성화된 후 약간의 지연을 두고 패딩 조정
					setTimeout(adjustJqGridHeaderPadding, 100);
				});

				// 창 크기 변경 시에도 실행
				$(window).resize(function () {
					adjustJqGridHeaderPadding();
				});

				// MutationObserver를 사용하여 DOM 변경 감지 (탭 패널의 클래스 변경 감지)
				if (window.MutationObserver) {
					const tabPanels = document.querySelectorAll(".krds-tab-area.layer .tab-conts");

					if (tabPanels.length > 0) {
						const observer = new MutationObserver(function (mutations) {
							mutations.forEach(function (mutation) {
								if (mutation.type === "attributes" && mutation.attributeName === "class") {
									// 클래스 변경 감지 시 그리드 패딩 조정
									if (mutation.target.classList.contains("active")) {
										setTimeout(adjustJqGridHeaderPadding, 100);
									}
								}
							});
						});

						// 각 탭 패널에 대해 observer 설정
						tabPanels.forEach(function (panel) {
							observer.observe(panel, { attributes: true });
						});
					}
				}
			});

			// jQuery 이벤트 바인딩 예시

			// z-tree : zNodes 추가 옵션
			// open: true : 기본 view가 오픈상태로 노출
			// disabled: true : 비활성화 메뉴의 경우
			// isParent: true : 하위 메뉴가 없는 상태에서 폴더형식의 경우

			// iconskin 변경
			// ico_docu, ico-page-md : 일반페이지 (기본), 지정되지 않은 종류의 페이지
			// ico_open, ico_close, ico-folder-md : 폴더 (기본)
			// ico-site-md : 사용자사이트 페이지
			// ico-editpage-md :웹콘텐츠 관리 페이지
			// ico-pagepgm-md : pgm 페이지
			// ico-pagebbs-md : bbs 페이지
			// ico-newwindow-md : 새창 (target: "_blank" 속성 추가 필요)
			// ico-code-md : 코드 페이지

			var zNodes = [
				{ id: 1, pId: 0, name: "사이트 메뉴명1", open: true },
				{ id: 11, pId: 1, name: "사이트 메뉴명1", open: true, disabled: true },
				{ id: 111, pId: 11, name: "사이트 메뉴명1", disabled: true },
				{ id: 112, pId: 11, name: "사이트 메뉴명1" },
				{ id: 113, pId: 11, name: "사이트 메뉴명1", target: "_blank", iconSkin: "ico-newwindow-md" },
				{ id: 114, pId: 11, name: "사이트 메뉴명1", iconSkin: "ico-editpage-md" },
				{ id: 115, pId: 11, name: "사이트 메뉴명1", iconSkin: "ico-pagepgm-md" },
				{ id: 116, pId: 11, name: "사이트 메뉴명1", iconSkin: "ico-pagebbs-md" },
				{ id: 117, pId: 11, name: "사이트 메뉴명1", iconSkin: "ico-code-md" },
				{ id: 118, pId: 11, name: "사이트 메뉴명1", target: "_blank", iconSkin: "ico-newwindow-md", disabled: true },
				{ id: 119, pId: 11, name: "사이트 메뉴명1", iconSkin: "ico-editpage-md", disabled: true },
				{ id: 1110, pId: 11, name: "사이트 메뉴명1", iconSkin: "ico-pagepgm-md", disabled: true },
				{ id: 1111, pId: 11, name: "사이트 메뉴명1", iconSkin: "ico-pagebbs-md", disabled: true },
				{ id: 1112, pId: 11, name: "사이트 메뉴명1", iconSkin: "ico-code-md", disabled: true },
				{ id: 12, pId: 1, name: "길어질 경우 가로 스크롤이 생성됩니다. 길어질 경우 가로 스크롤이 생성됩니다." },
				{ id: 121, pId: 12, name: "사이트 메뉴명1" },
				{ id: 122, pId: 12, name: "사이트 메뉴명1" },
				{ id: 13, pId: 1, name: "사이트 메뉴명1", iconSkin: "ico-site-md" },
				{ id: 13, pId: 1, name: "사이트 메뉴명1", iconSkin: "ico-site-md", disabled: true },
				{ id: 2, pId: 0, name: "사이트 메뉴명1" },
				{ id: 21, pId: 2, name: "사이트 메뉴명1" },
				{ id: 211, pId: 21, name: "사이트 메뉴명1" },
				{ id: 212, pId: 21, name: "사이트 메뉴명1" },
				{ id: 22, pId: 2, name: "사이트 메뉴명1" },
				{ id: 221, pId: 22, name: "사이트 메뉴명1" },
				{ id: 222, pId: 22, name: "사이트 메뉴명1" },
				{ id: 23, pId: 2, name: "사이트 메뉴명1" },
				{ id: 231, pId: 23, name: "사이트 메뉴명1" },
				{ id: 232, pId: 23, name: "사이트 메뉴명1" },
				{ id: 3, pId: 0, name: "사이트 메뉴명1" },
				{ id: 4, pId: 0, name: "사이트 메뉴명1" }
			];

			// zTree onClick 이벤트
			window.zTreeOnClick = function (event, treeId, treeNode) {
				// zTree 노드 클릭시 이벤트 사용자 정의
				alert(treeNode ? treeNode.tId : "root");
			};

			window.zTreeBeforeRename = function (treeId, treeNode, newName, isCancel) {
				// zTree 노드 네이밍 변경 시 기존 네임
				console.log(treeId, treeNode, newName, isCancel);
			};

			window.zTreeRename = function (e, treeId, treeNode, isCancel) {
				// zTree 노드 네이밍 변경 시 사용자 정의
				console.log(e, treeId, treeNode, isCancel);
			};

			// [노드 생성시 필수] zTree 노드 생성시 기준 네이밍 변경
			window.zTreeCreateNewNode = function (zTree, treeNode, isParent) {
				const nameFunc = function () {
					return "이름을 입력해주세요.";
				};
				return createNewNode(zTree, treeNode, isParent, nameFunc);
			};

			function removeNodeId(treeNode) {
				// zTree 삭제된 노드 확인
				console.log("삭제된 노드 확인: ", treeNode);
			}
		</script>
	</head>

	<body>
		<div class="wrapper">
			<div id="container" class="system-page">
				<aside id="sidebar"></aside>
				<article id="content">
					<div class="content-header">
						<!-- <h2 class="content-title">화면명</h2> -->
						<header class="content-header"></header>
					</div>
					<div class="content-body">
						<!-- 본문 영역 -->
						<nav class="krds-breadcrumb-wrap" aria-label="현재 경로" id="breadcrumb"></nav>

						<div class="container">
							<div class="card">
								<div class="box box-search">
									<dl class="form-group">
										<dt class="form-tit">
											<label for="select_name02">조직구분</label>
										</dt>
										<dd class="form-conts">
											<select id="select_name02" class="krds-form-select small" title="선택" style="max-width: 300px">
												<option value="">시스템</option>
												<option value="">항목2</option>
												<option value="">항목3</option>
												<option value="">항목4</option>
											</select>
										</dd>
									</dl>
								</div>
							</div>
							<div class="card-wrap">
								<div class="card card-sm">
									<div class="card-header line">
										<h3 class="card-title">조직트리</h3>
									</div>
									<div class="card-body">
										<!-- 트리메뉴 -->
										<div class="tree-menu-area">
											<div class="tree-header">
												<div class="btn-group-center gap-xs">
													<button type="button" class="krds-btn xxsmall tertiary" id="btnOpenTree">
														<i class="svg-icon ico-plus"></i>
														<span>전체열기</span>
													</button>
													<button type="button" class="krds-btn xxsmall tertiary" id="btnCloseTree">
														<i class="svg-icon ico-minus"></i>
														<span>전체닫기</span>
													</button>
												</div>
											</div>
											<div class="tree-body">
												<div class="scroll-area">
													<ul id="treeMenu" class="ztree"></ul>
												</div>
											</div>
											<div class="tree-footer">
												<div class="btn-group-center gap-xs">
													<button type="button" class="krds-btn xxsmall" id="btnAdd">
														<i class="svg-icon ico-plus"></i>
														<span>메뉴추가</span>
													</button>
													<button type="button" class="krds-btn xxsmall secondary" id="btnDelt">
														<i class="svg-icon ico-minus"></i>
														<span>메뉴삭제</span>
													</button>
													<button type="button" class="krds-btn xxsmall tertiary">
														<span>순서변경</span>
													</button>
												</div>
											</div>
										</div>

										<!-- 트리메뉴의 데이터가 없는 경우 : no-data -->
										<!-- <div class="tree-menu-area no-data">
											<div class="tree-body">
												<div class="scroll-area no-data">
													<strong>코드명을 생성해 주세요.</strong>
													<span>코드명을 생성한 뒤 하위항목을<br class="d-up-lg" />생성할 수 있습니다.</span>
												</div>
											</div>
											<div class="tree-footer">
												<div class="btn-group-center">
													<button type="button" class="krds-btn xxsmall" disabled>
														<i class="svg-icon ico-plus"></i>
														<span>메뉴추가</span>
													</button>
													<button type="button" class="krds-btn xxsmall secondary" disabled>
														<i class="svg-icon ico-minus"></i>
														<span>메뉴삭제</span>
													</button>
													<button type="button" class="krds-btn xxsmall tertiary" disabled>
														<span>순서변경</span>
													</button>
												</div>
											</div>
										</div> -->
									</div>
								</div>

								<div class="card">
									<div class="card-header line">
										<h3 class="card-title">메뉴상세</h3>
										<div class="card-toolbar">
											<button type="button" class="krds-btn small"><i class="svg-icon ico-plus"></i>추가</button>
											<button type="button" class="krds-btn small secondary" id="confirm-edit">
												<i class="svg-icon ico-edit left"></i>수정
											</button>
											<button type="button" class="krds-btn small tertiary" id="confirm-delete">
												<i class="svg-icon ico-trash left"></i>삭제
											</button>
											<button type="button" class="krds-btn small" id="confirm-regist">
												<i class="svg-icon ico-plus"></i>등록
											</button>
										</div>
									</div>
									<div class="card-body">
										<!-- table -->
										<div class="krds-table-wrap">
											<table class="tbl row data">
												<caption>
													조직상세에 대한 표로 조직번호, 조직명, 상위조직, 조직속성, 정렬순서, 사용여부, 등록자, 등록일,
													수정자, 수정일 등의 정보로 구성
												</caption>
												<tbody>
													<tr>
														<th scope="row">조직번호</th>
														<td>1000000001</td>
													</tr>
													<tr>
														<th scope="row">
															<label for="text_01">조직명</label>
														</th>
														<td>
															<input type="text" id="text_01" class="krds-input small" value="경영지원" />
														</td>
													</tr>
													<tr>
														<th scope="row">상위조직</th>
														<td>
															<input type="text" id="text_02" class="krds-input small" value="최상위조직" />
														</td>
													</tr>
													<tr>
														<th scope="row">조직속성</th>
														<td>
															<select
																id="select1"
																class="krds-form-select small completed"
																title="사용여부 선택"
																style="width: 200px"
															>
																<option value="" disabled hidden selected>팀</option>
																<option value="">옵션1</option>
																<option value="">옵션2</option>
															</select>
														</td>
													</tr>
													<tr>
														<th scope="row">정렬순서</th>
														<td>1</td>
													</tr>
													<tr>
														<th scope="row">사용여부</th>
														<td>
															<select
																id="select2"
																class="krds-form-select small completed"
																title="사용여부 선택"
																style="width: 200px"
															>
																<option value="" disabled hidden selected>사용</option>
																<option value="">미사용</option>
															</select>
														</td>
													</tr>
													<tr>
														<th scope="row">등록자</th>
														<td>관리자</td>
													</tr>
													<tr>
														<th scope="row">등록일</th>
														<td>2025-01-02 12:18:03</td>
													</tr>
													<tr>
														<th scope="row">수정자</th>
														<td>관리자</td>
													</tr>
													<tr>
														<th scope="row">수정일</th>
														<td>2025-01-02 12:18:03</td>
													</tr>
												</tbody>
											</table>
										</div>
										<!-- //table -->
									</div>
								</div>
							</div>
						</div>

						<!-- // 본문 영역 -->
					</div>
				</article>
			</div>
			<!-- <footer id="footer"></footer> -->
		</div>
	</body>
</html>
